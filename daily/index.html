<!DOCTYPE html>
<html>
<head>
    <title>ʔayʔaǰuθəm today</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
    body {
        margin: 0;
        padding: 0;
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        background: #f0f2f5; /* Slightly darker to make the 'keyboard' pop */
        height: 100dvh;
        display: flex;
        flex-direction: column;
    }

    h1 { 
        text-align: center; 
        color: #333; 
        margin: 15px 0; 
        font-size: 1.5rem;
    }

    .grid {
        display: grid;
        gap: 8px; /* Tighter gap looks more like a keyboard */
        padding: 10px;
        
        /* Centering */
        margin: 0 auto;
        width: 95%;
        
        /* DEFAULT (Desktop) - Familiar Keyboard Look 
           12 columns x 3 rows = 36 keys */
        grid-template-columns: repeat(12, 1fr);
        max-width: 1100px; /* Limits width so keys don't get massive on huge monitors */

        /* Scroll settings */
        flex: 1;
        overflow-y: auto;
        align-content: start; /* Keeps rows packed at the top */
    }

    /* --- TABLET BREAKPOINT (Between 600px and 900px) --- */
    @media (max-width: 900px) {
        .grid {
            /* 6 columns x 6 rows = 36 keys */
            grid-template-columns: repeat(6, 1fr);
            max-width: 600px; 
        }
    }

    /* --- MOBILE BREAKPOINT (Phones) --- */
    @media (max-width: 600px) {
        .grid {
            /* 4 columns x 9 rows = 36 keys 
               This ensures buttons are very large and thumb-friendly */
            grid-template-columns: repeat(4, 1fr);
            max-width: 100%;
        }
        
        .ipa-btn {
            font-size: 1.8rem; /* Keep text large */
        }
    }

    .ipa-btn {
        background: #fff; 
        border: 1px solid #c8c8c8; 
        border-radius: 6px; /* Slightly squarer corners for keyboard look */
        border-bottom-width: 3px; /* visual "depth" like a physical key */
        
        /* Text styling */
        font-size: 1.5rem; 
        color: #333;
        font-weight: 500;
        
        /* Interaction */
        cursor: pointer; 
        transition: all 0.1s ease;
        
        /* Shape */
        aspect-ratio: 1 / 1; 
        display: flex; 
        justify-content: center; 
        align-items: center;
        
        /* Prevent text selection */
        user-select: none;
        -webkit-tap-highlight-color: transparent;
    }

    .ipa-btn:active { 
        transform: translateY(2px); /* Presses "down" */
        border-bottom-width: 1px;   /* Reduces shadow/depth */
        background: #e6e6e6;
    }

    audio { display: none; }

    .disclaimer {
        text-align: center;
        font-size: 0.7rem;
        color: #888;
        padding: 10px;
        margin-top: auto;
    }

    .header-right { 
        position: absolute; 
        top: 20px; 
        right: 20px; 
    }
    
    .nav-btn {
        background: #3498db; 
        color: white; 
        text-decoration: none; 
        border: none;
        padding: 8px 16px; 
        border-radius: 4px; 
        font-size: 0.9rem; 
        transition: background 0.2s;
    }
    .nav-btn:hover { background: #2980b9; }
</style>

</head>
<body>

    <div class="container">
        <header><h2>Daily ʔayʔaǰuθəm Practice</h2></header>
		
        
        <div id="task-display" class="task-card">
            <p id="task-label" style="text-transform: uppercase; color: #2c3e50; font-weight: bold; font-size: 1.5rem">Today's Practice</p>
            <div id="task-content" class="task-text">Loading...</div>
            
            <div class="btn-group">
                <button class="big-btn secondary" onclick="showRandom()">Random</button>
				<button class="big-btn" onclick="showDaily()">Today</button>
                <button class="big-btn secondary" onclick="toggleAll()">Show All</button>
            </div>
        </div>

        <div id="all-tasks" class="all-tasks-list">
            <h3>All Practices</h3>
            <ul id="list-container"></ul>
        </div>
    </div>

    <script>
        let allTasks = [];

        // 1. Fetch the tasks from your JSON file
        fetch('tasks.json')
            .then(res => res.json())
            .then(data => {
                allTasks = data;
                showDaily(); // Initialize with the daily task
                populateAllList();
            });

        function showDaily() {
            // Use the date string to create a "seed"
            const today = new Date().toISOString().slice(0, 10); 
            const seed = today.split('-').join(''); // Turn it into a number: 20240520
            
            // Use math to pick an index that is consistent for everyone today
            const index = parseInt(seed) % allTasks.length;
            
            document.getElementById('task-label').innerText = "Today's Practice";
            document.getElementById('task-content').innerHTML = allTasks[index];
            document.getElementById('all-tasks').style.display = 'none';
        }

        function showRandom() {
            const index = Math.floor(Math.random() * allTasks.length);
            document.getElementById('task-label').innerText = "Random Practice";
            document.getElementById('task-content').innerHTML = allTasks[index];
        }

        function toggleAll() {
            const list = document.getElementById('all-tasks');
            list.style.display = list.style.display === 'block' ? 'none' : 'block';
        }

        function populateAllList() {
            const container = document.getElementById('list-container');
            container.innerHTML = ''; 
            allTasks.forEach(task => {
                const li = document.createElement('li');
                li.innerHTML = formatTaskForList(task);
                container.appendChild(li);
            });
        }

        // Helper: Converts iframes to links for the list view
        function formatTaskForList(taskHtml) {
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = taskHtml;
            
            const iframes = tempDiv.querySelectorAll('iframe');
            
            iframes.forEach(iframe => {
                const link = document.createElement('a');
                link.href = iframe.src;
                link.target = "_blank";
                link.innerText = "Watch Video"; 
                
                link.style.fontWeight = "bold";
                link.style.display = "inline-block";
                link.style.marginTop = "5px";

                iframe.parentNode.replaceChild(link, iframe);
            });

            return tempDiv.innerHTML;
        }
    </script>
</body>
</html>
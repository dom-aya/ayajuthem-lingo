<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CSV Data Viewer</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.2/papaparse.min.js"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f4f7f6;
            color: #333;
            padding: 20px;
            max-width: 1000px;
            margin: 0 auto;
        }

        h1 { text-align: center; color: #2c3e50; }

        /* Controls */
        .controls {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            margin-bottom: 20px;
            text-align: center;
        }

        select {
            padding: 10px;
            font-size: 1rem;
            border-radius: 4px;
            border: 1px solid #ccc;
            width: 50%;
        }

        /* Table Styling */
        .table-container {
            overflow-x: auto; /* Handles wide tables */
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        table {
            width: 100%;
            border-collapse: collapse;
            min-width: 600px;
        }

        thead {
            background-color: #2c3e50;
            color: white;
        }

        th, td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        th {
            font-weight: 600;
            text-transform: uppercase;
            font-size: 0.85rem;
            letter-spacing: 0.5px;
        }

        tr:hover { background-color: #f1f1f1; }
        
        /* Alternating row colors */
        tbody tr:nth-of-type(even) {
            background-color: #f9f9f9;
        }

        /* Empty State */
        #empty-msg {
            text-align: center;
            padding: 40px;
            color: #7f8c8d;
        }
    </style>
</head>
<body>

    <h1>CSV Data Viewer</h1>

    <div class="controls">
        <label for="file-select"><strong>Select File:</strong></label><br><br>
        <select id="file-select" onchange="loadTable(this.value)">
            <option value="" disabled selected>Choose a CSV file...</option>
            </select>
    </div>

    <div class="table-container">
        <div id="empty-msg">Select a file above to view data.</div>
        <table id="data-table" style="display:none;">
            <thead>
                <tr id="table-head-row"></tr>
            </thead>
            <tbody id="table-body"></tbody>
        </table>
    </div>

<script>
    // 1. CONFIGURATION: List your files here
    const files = [
        "01_Greetings.csv",
        "02_Story.csv"
    ];

    // 2. INITIALIZATION: Populate Dropdown
    window.onload = () => {
        const selector = document.getElementById('file-select');
        files.forEach(filename => {
            const opt = document.createElement('option');
            opt.value = filename;
            opt.innerText = filename;
            selector.appendChild(opt);
        });
    };

    // 3. LOAD & RENDER
    function loadTable(filename) {
        Papa.parse(filename, {
            download: true,
            header: true,       // Treats first row as headers
            skipEmptyLines: true,
            complete: function(results) {
                render(results.data, results.meta.fields);
            },
            error: function(err) {
                alert("Error loading file: " + err.message);
            }
        });
    }

    function render(data, headers) {
        const table = document.getElementById('data-table');
        const theadRow = document.getElementById('table-head-row');
        const tbody = document.getElementById('table-body');
        const msg = document.getElementById('empty-msg');

        // Clear previous data
        theadRow.innerHTML = '';
        tbody.innerHTML = '';

        if (data.length === 0) {
            msg.innerText = "File is empty.";
            msg.style.display = 'block';
            table.style.display = 'none';
            return;
        }

        // Show Table, Hide Message
        msg.style.display = 'none';
        table.style.display = 'table';

        // 1. Generate Headers
        if (headers) {
            headers.forEach(headerText => {
                const th = document.createElement('th');
                th.innerText = headerText;
                theadRow.appendChild(th);
            });
        }

        // 2. Generate Rows
        data.forEach(row => {
            const tr = document.createElement('tr');
            
            // Loop through headers to ensure order matches columns
            headers.forEach(headerKey => {
                const td = document.createElement('td');
                td.innerText = row[headerKey] || ""; // Handle empty cells
                tr.appendChild(td);
            });
            
            tbody.appendChild(tr);
        });
    }
</script>

</body>
</html>
